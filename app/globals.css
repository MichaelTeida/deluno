@import "tailwindcss";

@layer theme {
  :root {
    --background: #ffffff;
    --foreground: #171717;

    /* --- THEME ENGINE: CORE TOKENS --- */

    /* 1. Layout & Spacing */
    --gap-main: 1rem;
    /* Gap between floating islands */
    --radius-panel: 1.5rem;
    /* Rounded corners (24px) */
    --radius-button: 9999px;
    /* Pills */

    /* 2. Glass Base Properties */
    --glass-border-color: rgba(255, 255, 255, 0.15);
    /* More subtle */
    --glass-border-width: 1px;
    --glass-blur: 24px;
    /* Increased blur */
    /* Frosted effect intensity */
    --glass-saturate: 180%;
    /* Vibrancy */

    /* 3. Panel Colors (Aurora Theme) */
    --glass-panel-bg: rgba(255, 255, 255, 0.65);
    /* Slightly more opaque for better contrast */
    /* Rail/Sidebar */
    --glass-content-bg: rgba(255, 255, 255, 0.75);
    /* Main Content */
    --glass-interactive-bg: rgba(255, 255, 255, 0.4);
    /* Buttons */

    /* 4. Liquid Shine Effect (Toggleable) */
    /* Set to 0 to disable liquid effect globally */
    --shine-opacity: 0.3;
    /* Subtle shine */
    --shine-angle: 125deg;
  }

  /* Dark Mode Overrides - Class selector for next-themes */
  .dark {
    --background: #000000;
    --foreground: #f5f5f7;
    --glass-border-color: rgba(255, 255, 255, 0.08);
    --glass-panel-bg: rgba(28, 28, 30, 0.75);
    --glass-content-bg: rgba(28, 28, 30, 0.65);
    --glass-interactive-bg: rgba(255, 255, 255, 0.06);
    --shine-opacity: 0.15;
  }

  /* Dark Mode Overrides - Media query fallback for system preference */
  @media (prefers-color-scheme: dark) {
    :root:not(.light) {
      --background: #000000;
      --foreground: #f5f5f7;
      --glass-border-color: rgba(255, 255, 255, 0.08);
      --glass-panel-bg: rgba(28, 28, 30, 0.75);
      --glass-content-bg: rgba(28, 28, 30, 0.65);
      --glass-interactive-bg: rgba(255, 255, 255, 0.06);
      --shine-opacity: 0.15;
    }
  }
}

/* Aurora Mesh Background */
body {
  color: var(--foreground);
  background:
    radial-gradient(at 0% 0%, rgba(200, 210, 255, 0.7) 0px, transparent 50%),
    radial-gradient(at 100% 0%, rgba(220, 200, 255, 0.6) 0px, transparent 50%),
    radial-gradient(at 100% 100%, rgba(200, 240, 255, 0.6) 0px, transparent 50%),
    radial-gradient(at 0% 100%, rgba(220, 255, 220, 0.5) 0px, transparent 50%),
    var(--background);
  background-attachment: fixed;
  background-size: cover;
  font-family: var(--font-sans), system-ui, sans-serif;
  min-height: 100vh;
  margin: 0;
  overflow: hidden;
  /* App-like feel */
}

/* Dark mode specific gradients for stronger immersion */
.dark body,
html.dark body {
  background:
    radial-gradient(at 0% 0%, rgba(40, 50, 100, 0.5) 0px, transparent 50%),
    radial-gradient(at 100% 0%, rgba(60, 40, 110, 0.4) 0px, transparent 50%),
    radial-gradient(at 100% 100%, rgba(30, 70, 100, 0.4) 0px, transparent 50%),
    radial-gradient(at 0% 100%, rgba(40, 80, 50, 0.4) 0px, transparent 50%),
    var(--background);
}

@media (prefers-color-scheme: dark) {
  body:not(.light body) {
    background:
      radial-gradient(at 0% 0%, rgba(40, 50, 100, 0.5) 0px, transparent 50%),
      radial-gradient(at 100% 0%, rgba(60, 40, 110, 0.4) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(30, 70, 100, 0.4) 0px, transparent 50%),
      radial-gradient(at 0% 100%, rgba(40, 80, 50, 0.4) 0px, transparent 50%),
      var(--background);
  }
}

/* --- THEME ENGINE: COMPONENT CLASSES --- */

@layer components {

  /* 1. The Universal Glass Class */
  .glass {
    position: relative;
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    border: var(--glass-border-width) solid var(--glass-border-color);
    box-shadow:
      0 10px 40px -10px rgba(0, 0, 0, 0.08),
      0 0 0 1px rgba(255, 255, 255, 0.1) inset;
    /* Inner glow */
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    /* Smoother bezier */
  }

  /* 2. Variants via Data Modifier */

  /* Panel: Used for Rail, Sidebar, Content Areas */
  .glass[data-variant="panel"] {
    background: var(--glass-panel-bg);
    border-radius: var(--radius-panel);
    /* Inner light for depth */
    box-shadow:
      0 4px 24px -1px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
  }

  /* Content: Used for the main workspace */
  .glass[data-variant="content"] {
    background: var(--glass-content-bg);
    border-radius: var(--radius-panel);
    box-shadow:
      0 4px 24px -1px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  /* Interactive: Buttons, Pills, Cards */
  .glass[data-variant="interactive"] {
    background: var(--glass-interactive-bg);
    border-radius: var(--radius-button);
    cursor: pointer;
  }

  .glass[data-variant="interactive"]:hover {
    background: rgba(255, 255, 255, 0.5);
    transform: translateY(-1px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
  }

  /* CTA: Primary Action Buttons (e.g., "+ New") */
  .glass[data-variant="cta"] {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.9) 0%,
        rgba(139, 92, 246, 0.85) 50%,
        rgba(168, 85, 247, 0.8) 100%);
    border-radius: var(--radius-button);
    border-color: rgba(255, 255, 255, 0.25);
    cursor: pointer;
    color: white;
    font-weight: 600;
    box-shadow:
      0 4px 16px -2px rgba(99, 102, 241, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .glass[data-variant="cta"]:hover {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 1) 0%,
        rgba(139, 92, 246, 0.95) 50%,
        rgba(168, 85, 247, 0.9) 100%);
    transform: translateY(-2px) scale(1.02);
    box-shadow:
      0 8px 24px -4px rgba(99, 102, 241, 0.5),
      0 0 20px rgba(139, 92, 246, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
  }

  .glass[data-variant="cta"]:active {
    transform: translateY(0) scale(0.98);
  }

  .dark .glass[data-variant="cta"] {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.85) 0%,
        rgba(139, 92, 246, 0.8) 50%,
        rgba(168, 85, 247, 0.75) 100%);
    box-shadow:
      0 4px 20px -2px rgba(99, 102, 241, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .dark .glass[data-variant="cta"]:hover {
    box-shadow:
      0 8px 28px -4px rgba(99, 102, 241, 0.6),
      0 0 24px rgba(139, 92, 246, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  /* 3. The Liquid Shine (Pseudo-element) */
  /* Applied to any .glass element that doesn't explicitly opt-out */
  .glass:not([data-no-shine="true"])::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;

    /* The Liquid Gradient */
    background: linear-gradient(var(--shine-angle),
        rgba(255, 255, 255, 0.4) 0%,
        rgba(255, 255, 255, 0.1) 40%,
        transparent 60%);

    /* Internal Shadows for Gel/Liquid look */
    box-shadow:
      inset -10px -8px 0px -11px rgba(255, 255, 255, 0.5),
      inset 0px -9px 0px -8px rgba(255, 255, 255, 0.6);

    opacity: var(--shine-opacity);
    pointer-events: none;
    z-index: 2;
    mix-blend-mode: overlay;
  }

  /* Scrollbar Styling */
  .custom-scrollbar::-webkit-scrollbar {
    width: 5px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 10px;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
  }

  @media (prefers-color-scheme: dark) {
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.1);
    }
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.2);
  }

  /* Global Focus Ring for Accessibility */
  :focus-visible {
    outline: 2px solid theme('colors.indigo.500');
    outline-offset: 2px;
  }
}

/* CTA Button - Outside of layer for higher specificity */
button.glass[data-variant="cta"],
a.glass[data-variant="cta"] {
  background: linear-gradient(135deg,
      rgba(99, 102, 241, 0.95) 0%,
      rgba(139, 92, 246, 0.9) 50%,
      rgba(168, 85, 247, 0.85) 100%) !important;
  border-radius: 9999px !important;
  border-color: rgba(255, 255, 255, 0.25) !important;
  cursor: pointer;
  color: white !important;
  font-weight: 600;
  box-shadow:
    0 4px 16px -2px rgba(99, 102, 241, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

button.glass[data-variant="cta"]:hover,
a.glass[data-variant="cta"]:hover {
  background: linear-gradient(135deg,
      rgba(99, 102, 241, 1) 0%,
      rgba(139, 92, 246, 0.95) 50%,
      rgba(168, 85, 247, 0.9) 100%) !important;
  transform: translateY(-2px) scale(1.02);
  box-shadow:
    0 8px 24px -4px rgba(99, 102, 241, 0.5),
    0 0 20px rgba(139, 92, 246, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

button.glass[data-variant="cta"]:active,
a.glass[data-variant="cta"]:active {
  transform: translateY(0) scale(0.98);
}

.dark button.glass[data-variant="cta"],
.dark a.glass[data-variant="cta"] {
  background: linear-gradient(135deg,
      rgba(99, 102, 241, 0.9) 0%,
      rgba(139, 92, 246, 0.85) 50%,
      rgba(168, 85, 247, 0.8) 100%) !important;
  box-shadow:
    0 4px 20px -2px rgba(99, 102, 241, 0.5),
    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
}

.dark button.glass[data-variant="cta"]:hover,
.dark a.glass[data-variant="cta"]:hover {
  box-shadow:
    0 8px 28px -4px rgba(99, 102, 241, 0.6),
    0 0 24px rgba(139, 92, 246, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}